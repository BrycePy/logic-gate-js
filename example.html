<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="logic-canvas-here"></div>
</body>

<link rel="stylesheet" href="logicgate.css" />

<script
src="https://code.jquery.com/jquery-3.7.1.min.js"
integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
crossorigin="anonymous"
></script>

<script
src="https://code.jquery.com/ui/1.14.0/jquery-ui.min.js"
integrity="sha256-Fb0zP4jE3JHqu+IBB9YktLcSjI1Zc6J2b6gTjB0LpoM="
crossorigin="anonymous"
></script>

<script src="logicgate_template.js"></script>
<script src="logicgate_back.js"></script>
<script src="logicgate_front.js"></script>
<script>
  $(document).ready(async function(){

    // Define div for the logic canvas
    let logicDiv = document.getElementById("logic-canvas-here");
    logicDiv.style.width = "400px"
    logicDiv.style.height = "300px"

    // Create the logic canvas
    let mainWorld = new World();
    let logicCanvas = new LogicCanvas(mainWorld, logicDiv);
    
    // Start the visual and world ticks
    logicCanvas.startVisualTick();
    logicCanvas.startWorldTick(tickPerSecond=10);

    // Show/Hide Wireframe for just the LogicCanvas
    logicCanvas.hideWireFrame();
    logicCanvas.showWireFrame();
    // Show/Hide Wireframe for all elements
    logicCanvas.hideWireFrame($("*"));
    logicCanvas.showWireFrame($("*"));

    // Create some inputs and outputs
    let in1 = logicCanvas.createInput();                      await sleep(100); 
    let in2 = logicCanvas.createInput();                      await sleep(100); 
    let in3 = logicCanvas.createInput();                      await sleep(100); 
    let out1 = logicCanvas.createOutput();                    await sleep(100); 
    let out2 = logicCanvas.createOutput();                    await sleep(100); 


    // Create some gates
    let gateAND1 = logicCanvas.createGate("AND", 120, 70);    await sleep(100); 
    let gateOR1 = logicCanvas.createGate("OR", 220, 140);     await sleep(100); 

    // connect the gates
    logicCanvas.connect(in1.out(0), gateAND1.in(0));          await sleep(100); 
    logicCanvas.connect(in2.out(0), gateAND1.in(1));          await sleep(100);
    logicCanvas.connect(in3.out(0), gateOR1.in(1));           await sleep(100);
    logicCanvas.connect(gateAND1.out(0), gateOR1.in(0));      await sleep(100);
    logicCanvas.connect(gateAND1.out(0), out1.in(0));         await sleep(100);
    logicCanvas.connect(gateOR1.out(0), out2.in(0));          await sleep(100);
    
    

    await sleep(100);
    let result = await logicCanvas.evaluate([0, 1, 1]);
    console.log(result);
  });
</script>


</html>